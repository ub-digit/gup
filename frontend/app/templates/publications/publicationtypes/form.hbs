<div class="gup-form">
{{#if errors}}
  <div class="row">
    <div class="col-xs-12 col-sm-10">
      <div class="gup-form-callout-warning">
        <div class="alert alert-danger" role="alert">
          <p><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> {{t 'publications.publicationtypes.form.generalErrorHeader'}} </p>
        </div>
      </div>
    </div>
  </div>
{{/if}}
{{#if selectPublicationVisible}}
  {{partial 'publications/publicationtypes/selector'}}
{{else}}
  {{#if isSelectedPublicationValid}}
    <label>{{t 'publications.publicationtypes.form.publicationType'}}</label>
    <div>{{getPublicationTypeObject.name}}<button class="btn btn-link" {{action 'resetSelectedPublicationType'}}><i class="fa fa-pencil-square-o" aria-hidden="true"></i> {{t 'publications.publicationtypes.form.changePublicationTypeLink'}}</button>
    </div>
  {{/if}}

  {{#if refValueSelectionVisible}}
    <div class="row">
      <div class="col-xs-6">
        <span class="form-group {{if errors.ref_value 'has-error'}}">
          {{field-component selectedPublicationType=getPublicationTypeObject fieldName="ref_value" type="ref"  errors=errors.ref_value value=refValueBool label=(t 'publications.publicationtypes.form.refereeLable')}}
        </span>
      </div>
    </div>
  {{/if}}

  <div class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.title 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="title" type="textarea" errors=errors.title value=publication.title}}
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.alt_title 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="alt_title" type="textarea" errors=errors.alt_title value=publication.alt_title}}
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-3">
      <span class="form-group {{if errors.pubyear 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="pubyear" type="text"  errors=errors.pubyear value=publication.pubyear}}
      </span>
    </div>
  </div>

  {{#if authorComponentIsVisible}}
    <span class="form-group {{if errors.author 'has-error'}}">
      {{author-block errors=errors.authors fieldHelptext="publications.publicationtypes.form.help.authors.helptext" invalidSelectedDepartmentItemsChanged=(action "invalidSelectedDepartmentItemsChanged") authorArr=authorArr selectedPublicationType=getPublicationTypeObject arrOfAuthorsFromImport=arrOfAuthorsFromImport institutions=publicationYearDepartments defaultInstitution=defaultInstitution submitCallbacks=submitCallbacks}}
    </span>
  {{/if}}

  <hr/>

{{#field-group}}
  <!-- Dissertaion fields -->

  <div id="diss-date" class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.dissdate 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="dissdate" type="date" errors=errors.dissdate value=publication.dissdate}}
      </span>
    </div>
  </div>

  <div id="diss-time" class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.disstime 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="disstime" type="text" errors=errors.disstime value=publication.disstime}}
      </span>
    </div>
  </div>

  <div id="diss-location" class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.disslocation 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="disslocation" type="text"  errors=errors.disslocation value=publication.disslocation}}
      </span>
    </div>
  </div>

  <div id="diss-opponent" class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.dissopponent 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="dissopponent" type="text" errors=errors.dissopponent value=publication.dissopponent}}
      </span>
    </div>
  </div>

{{/field-group}}

{{#field-group}}

  <div class="row">
    <div class="col-md-9 ">
      <span class="form-group {{if errors.sourcetitle 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldPlaceholder='publications.publicationtypes.form.help.publisher.placeholder' fieldName="sourcetitle" type="journal" issn=publication.issn eissn=publication.eissn  journal_id=publication.journal_id sourcetitle=publication.sourcetitle errors=errors.sourcetitle }}
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
      <span class="form-group {{if errors.issn 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="issn" type="issn"  disabled=publication.journal_id errors=errors.issn value=publication.issn}}
      </span>
    </div>
    <div class="col-md-3">
      <span class="form-group {{if errors.eissn 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="eissn" type="issn"  disabled=publication.journal_id errors=errors.eissn value=publication.eissn}}
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
      <span class="form-group {{if errors.sourcevolume 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="sourcevolume" type="text"  errors=errors.sourcevolume value=publication.sourcevolume}}
      </span>
    </div>
    <div class="col-md-3">
      <span class="form-group {{if errors.sourceissue 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="sourceissue" type="text" errors=errors.sourceissue value=publication.sourceissue}}
      </span>
    </div>
    <div class="col-md-3">
      <span class="form-group {{if errors.sourcepages 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="sourcepages" type="text"  errors=errors.sourcepages value=publication.sourcepages}}
      </span>
    </div>
    <div class="col-md-3">
      <span class="form-group {{if errors.article-number 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="article_number" type="text"  errors=errors.article_number value=publication.article_number}}
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.epub_ahead_of_print 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="epub_ahead_of_print" type="ahead" errors=errors.epub_ahead_of_print value=publication.epub_ahead_of_print}}
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <span class="form-group {{if errors.isbn 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="isbn" type="isbn"  errors=errors.isbn value=publication.isbn}}
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-md-6">
      <span class="form-group {{if errors.publanguage 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="publanguage" type="select"  errors=errors.publanguage value=publication.publanguage selectValues=languages}}
      </span>
    </div>
  </div>

  <!--
  <div class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.url 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="url" type="text"  errors=errors.url value=publication.url}}
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.links 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="links" type="text" errors=errors.links value=publication.links}}
      </span>
    </div>
  </div>
  -->
  <span class="form-group {{if errors.links 'has-error'}}">
    <section id="publication-links">
      <label class="control-label">{{t 'publications.publicationtypes.form.publicationLinksLabel'}}</label>
      <span class="help-block">{{t 'publications.publicationtypes.form.help.publicationLinks'}}</span>
      {{#multiple-items
        items=publication.publication_links
        createNewItem=createNewPublicationLink
        addItemText=(t 'publications.publicationtypes.form.publicationLinksAddItem')
        as |publication_link multipleItem|}}
        <div class="row">
          <div class="col-xs-10">
            <div class="form-group">
              {{input
                type="text"
                class="form-control"
                id=(concat "publication-url-" multipleItem.index)
                focus-out=(action "sanitizePublicationLink" publication_link)
                value=publication_link.url
              }}
            </div>
          </div>
          <div class="col-xs-1">
            {{multipleItem.removeButton}}
          </div>
          <div class="col-xs-1">
            {{multipleItem.sortControls}}
          </div>
        </div>
      {{/multiple-items}}
    </section>
  </span>

  <div class="row">
    <div class="col-md-3">
      <span class="form-group {{if errors.extent 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="extent" type="text" errors=errors.extent value=publication.extent}}
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.publisher 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="publisher" type="text"  errors=errors.publisher value=publication.publisher}}
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.place 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="place" type="text"  errors=errors.place value=publication.place}}
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.series 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="series" type="multiselect"  errors=errors.series selectValues=series value=selectedSeries}}
      </span>
    </div>
  </div>
{{/field-group}}

{{#field-group}}

  <div class="row">
    <div class="col-xs-12">
      <span class="form-group {{if errors.category_hsv_local 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="category_hsv_local" type="category-selector" fieldHelptext="publications.publicationtypes.form.help.category_hsv_local.helptext" errors=errors.category_hsv_local value=publication.category_hsv_local categoryObjects=categoryObjectsList}}
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.abstract 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="abstract" type="textarea" errors=errors.abstract value=publication.abstract}}
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.keywords 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="keywords" type="textarea" errors=errors.keywords value=publication.keywords}}
      </span>
    </div>
  </div>
{{/field-group}}

{{#field-group}}

  <div class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.project 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="project" fieldHelptext="publications.publicationtypes.form.help.project.helptext" type="multiselect"  errors=errors.project selectValues=projects value=selectedProjects}}
      </span>
    </div>
  </div>

  <div class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.pub_notes 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="pub_notes" fieldHelptext="publications.publicationtypes.form.help.pub_notes.helptext" type="textarea" errors=errors.pub_notes value=publication.pub_notes}}
      </span>
    </div>
  </div>

  <div id="artwork-type" class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.artwork_type 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="artwork_type" type="text"  errors=errors.artwork_type value=publication.artwork_type}}
      </span>
    </div>
  </div>

  <!-- Patent fields -->

  <div id="patent-applicant" class="row">
    <div class="col-md-9">
      <span class=":form-group {{if errors.patent_applicant 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="patent_applicant" type="text"  errors=errors.patent_applicant value=publication.patent_applicant}}
      </span>
    </div>
  </div>

  <div id="patent-application-number" class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.patent_application_number 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="patent_application_number" type="text" errors=errors.patent_application_number value=publication.patent_application_number}}
      </span>
    </div>
  </div>

  <div id="patent-application-date" class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.patent_application_date 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="patent_application_date" type="text"  errors=errors.patent_application_date value=publication.patent_application_date}}
      </span>
    </div>
  </div>

  <div id="patent-number" class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.patent_number 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="patent_number" type="text"  errors=errors.patent_number value=publication.patent_number}}
      </span>
    </div>
  </div>

  <div id="patent-date" class="row">
    <div class="col-md-9">
      <span class="form-group {{if errors.patent_date 'has-error'}}">
        {{field-component selectedPublicationType=getPublicationTypeObject fieldName="patent_date" type="date"  errors=errors.patent_date value=publication.patent_date}}
      </span>
    </div>
  </div>
{{/field-group}}

  {{publication-identifier-block fieldHelptext="publications.publicationtypes.form.help.publicationIdentifiers.helptext" publicationIdentifiers=publication.publication_identifiers publicationIdentifierCodes=publicationIdentifierCodes}}

{{/if}}

</div>
